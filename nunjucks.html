<!doctype html><html lang="ru"><head><meta charset="UTF-8"><meta content="width=device-width,initial-scale=1" name="viewport"><meta content="Nunjucks — шаблонизатор для JavaScript, HTML-препроцессор" name="description"><meta content="frontrabotka.github" name="author"><title>Гайд по Nunjucks</title><link href="https://fonts.googleapis.com" rel="preconnect"><link href="https://fonts.gstatic.com" rel="preconnect" crossorigin><link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet"><meta content="https://frontrabotka.github.io/conspect/" property="og:url"><meta content="Conspect" property="og:title"><meta content="Nunjucks — шаблонизатор для JavaScript, HTML-препроцессор" property="og:description"><meta content="https://frontrabotka.github.io/conspect/assets/favicon/og-image.png" property="og:image"><meta content="website" property="og:type"><meta content="Conspect" property="og:site_name"><meta content="ru_RU" property="og:locale"><meta content="summary_large_image" property="twitter:card"><meta content="https://frontrabotka.github.io/conspect/" property="twitter:url"><meta content="Conspect" property="twitter:title"><meta content="Nunjucks — шаблонизатор для JavaScript, HTML-препроцессор" property="twitter:description"><meta content="https://frontrabotka.github.io/conspect/assets/favicon/og-image.png" property="twitter:image"><link href="assets/favicon/favicon.svg" rel="icon" sizes="any" type="image/svg+xml"><link href="assets/favicon/favicon-48x48.png" rel="icon" sizes="48x48" type="image/png"><link href="assets/favicon/favicon.ico" rel="icon"><link href="assets/favicon/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"><meta content="Conspect" name="apple-mobile-web-app-title"><link href="manifest.webmanifest" rel="manifest"><link href="assets/favicon/android-chrome-192x192.png" rel="icon" sizes="192x192" type="image/png"><link href="assets/favicon/android-chrome-512x512.png" rel="icon" sizes="512x512" type="image/png"><link href="assets/style/main.css" rel="stylesheet"><link href="assets/style/pages.css" rel="stylesheet"><link href="assets/style/prism.css" rel="stylesheet"></head><body><header><a href="/conspect/" title="Главная страница" class="logo"><img alt="Переход на главную страницу" height="140" src="assets/img/logo.png" width="140"></a></header><main><header><h1>Гайд по Nunjucks</h1><nav><h2 class="heading">Навигация по странице</h2><ol><li><a href="#header-1">Введение.</a></li><li><a href="#header-2">Переменные.</a></li><li><a href="#header-3">Теги.</a></li><li><a href="#header-4">Условия.</a></li><li><a href="#header-5">Циклы.</a></li><li><a href="#header-6">Наследование шаблонов.</a></li><li><a href="#header-7">Фильтры.</a></li></ol></nav></header><p><span class="cursive"><small class="bold">Дата последней правки: </small><time datetime="2025-07-03"><small>3 июля 2025</small></time></span></p><p><span class="cursive"><small class="bold">Примечание:</small> <small>если WebStorm не обнаруживает файлы Nunjucks, установите плагин TWIG.</small></span></p><section><h2><span id="header-1">Введение</span></h2><p>Nunjucks — это движок шаблонов для JavaScript и Node.js, который позволяет создавать динамические веб-страницы путём разделения логики и представления. Он работает как препроцессор, преобразующий шаблоны и данные в готовый HTML-код.</p><p>Nunjucks позволяет вставлять содержимое одного файла в другой. Это даёт возможность выносить в отдельные файлы разметку повторяющихся блоков.</p><p>✒️ <dfn>Препроцессор</dfn> — это специальный инструмент, который преобразует и расширяет исходный код из одного формата в другой перед выполнением или компиляцией.</p></section><hr><section><h2><span id="header-2">Переменные</span></h2><p>✒️ <dfn>Переменные</dfn> в Nunjucks — это именованные контейнеры для хранения значений, которые можно использовать в шаблоне. Nunjucks ищет значение переменной в контексте шаблона, который обычно содержит данные, переданные из приложения. Часто возникает ситуация, когда одни и те же данные выводятся в разных местах сайта, например, контактные данные или заголовок страницы. Для этого используются переменные, которые позволяют задавать значения в начале кода и выводить их в нужных участках.</p><p>Переменные создаются и присваиваются с использованием тега <code>{% set %}</code>. Для вывода содержимого переменной используются двойные фигурные скобки <code>{{ имяПеременной }}</code>:</p><pre class="language-nunjucks" tabindex="0"><code class="language-nunjucks"><span class="token punctuation delimiter">{%</span> <span class="token tag keyword">set</span> <span class="token variable">pageTitle</span> <span class="token operator">=</span> <span class="token string">'Главная страница'</span> <span class="token operator">%</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">pageTitle</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><p>Вывод кода будет: «<samp>Главная страница</samp>».</p><p>Переменные доступны только после их объявления. По умолчанию они работают внутри текущего шаблона. Имена переменных могут содержать точку (<code>.</code>), которая используется для доступа к свойствам объекта:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> post<span class="token punctuation">.</span>url <span class="token punctuation delimiter">}}</span></span>
</code></pre><p>Также можно использовать синтаксис квадратных скобок:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> post <span class="token punctuation">[</span><span class="token string">'url'</span><span class="token punctuation">]</span> <span class="token punctuation delimiter">}}</span></span> 
</code></pre><p>Если значение равно <code>undefined</code> или <code>null</code>, то ничего не отобразится.</p><p>Можно задавать несколько переменных одновременно:</p><pre class="language-nunjucks" tabindex="0"><code class="language-nunjucks"><span class="token punctuation delimiter">{%</span> <span class="token tag keyword">set</span> <span class="token variable">x</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token variable">y</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token variable">z</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">%</span><span class="token punctuation">}</span>
</code></pre><p>Если <code>set</code> используется вне блоков с областью видимости (таких как блоки, определяемые <code>include</code>, <code>block</code> или <code>macro</code>), он изменяет значение в контексте текущего шаблона и шаблонов, которые он включает. Если <code>set</code> используется внутри блоков с областью видимости, таких как <code>include</code>, то он изменяет только текущую область видимости.</p><p>Типы данных в Nunjucks:</p><ul><li>Строки: <code>{% set name = 'Волга' %}</code>;</li><li>Числа: <code>{% set age = 5 %}</code>;</li><li>Булевы значения: <code>{% set isAdmin = true %}</code>;</li><li>Массивы: <code>{% set cars = ['Волга', 'Лада'] %}</code>;</li><li>Объекты: <code>{% set user = { name: 'Иван', age: 30 } %}</code>.</li></ul></section><hr><section><h2><span id="header-3">Теги</span></h2><p>✒️ <dfn>Теги</dfn> в Nunjucks — это специальные конструкции, используемые для контроля потока выполнения шаблона, реализации логики и организации структуры документа. Они являются основным строительным блоком для создания динамических шаблонов. Nunjucks использует синтаксис <code>{%...%}</code> для управляющих операторов, таких как циклы, условные операторы и объявления переменных. Например:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>
    <span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">for</span> brand <span class="token keyword">in</span> brands <span class="token punctuation delimiter">%}</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> brand <span class="token punctuation delimiter">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
    <span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">endfor</span> <span class="token punctuation delimiter">%}</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
</code></pre><p>Nunjucks также предоставляет механизм для наследования шаблонов. Блоки, определяемые с помощью тега <code>{% block %}</code>, представляют собой именованные участки в шаблонах, которые можно переопределить в дочерних шаблонах, реализуя таким образом механизм наследования и повторного использования кода. Как правило, есть открывающая часть <code>{% block blockName %}</code> и закрывающая <code>{% endblock %}</code>.</p><p>Чтобы вывести какой-либо из специальных тегов Nunjucks, можно заключить их внутри тега <code>{% raw %}...{% endraw %}</code>. Всё, что находится внутри него, будет выведено как обычный текст. Это полезно при документировании или создании учебных материалов по Nunjucks:</p><pre class="language-nunjucks" tabindex="0"><code class="language-nunjucks"><span class="token punctuation delimiter">{%</span> <span class="token tag keyword">raw</span> <span class="token operator">%</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> <span class="token boolean">true</span> <span class="token operator">%</span><span class="token punctuation">}</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token string">'Добро пожаловать'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token operator">%</span> <span class="token variable">endif</span> <span class="token operator">%</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token operator">%</span> <span class="token variable">endraw</span> <span class="token operator">%</span><span class="token punctuation">}</span>
</code></pre><p>Результатом будет:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">if</span> <span class="token boolean">true</span> <span class="token punctuation delimiter">%}</span></span>
    <span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> <span class="token string">'Добро пожаловать'</span> <span class="token punctuation delimiter">}}</span></span>
<span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">endif</span> <span class="token punctuation delimiter">%}</span></span>
</code></pre><p>Когда Nunjucks обрабатывает шаблоны, он не удаляет переносы строк и пробелы вокруг тегов. Символ минус (<code>-</code>) добавляется внутри тега, сразу после открывающей скобки <code>{%-</code> для удаления пробелов слева или перед закрывающей скобкой <code>-%}</code> для удаления пробелов справа:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token punctuation delimiter">-%}</span></span>
<span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> i <span class="token punctuation delimiter">}}</span></span>
<span class="token language-liquid liquid"><span class="token punctuation delimiter">{%-</span> <span class="token keyword">endfor</span><span class="token punctuation delimiter">%}</span></span>
</code></pre><p>Вывод этого кода будет: «<samp>12345</samp>».</p><p>То же самое касается переменных: <code>{{-</code> удалит пробелы перед переменной, а <code>-}}</code> удалит пробелы после переменной. Удаление пробелов работает и для других тегов (условия, макросы и т.д.).</p><p>Комментарии используются для добавления примечаний или пояснений к коду, которые игнорируются шаблонизаторами и не отображаются на странице: <code>{# комментарий #}</code>.</p></section><hr><section><h2><span id="header-4">Условия</span></h2><p>✒️ <dfn>Условия</dfn> в Nunjucks — это механизм управления потоком выполнения шаблона, позволяющий отображать разный контент в зависимости от определённых условий. Это позволяет создавать динамические шаблоны, которые адаптируются под различные данные и ситуации, например, отображать разный контент для авторизованных и неавторизованных пользователей.</p><p>Условные операторы, такие как <code>if</code>, <code>elif</code> и <code>else</code>, позволяют выполнять различные действия в зависимости от определённых условий.</p><p>Условный оператор <code>if</code> проверяет условие и выборочно отображает содержимое:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">if</span> variable <span class="token punctuation delimiter">%}</span></span>
    Это верно
<span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">endif</span> <span class="token punctuation delimiter">%}</span></span>
</code></pre><p>Если переменная определена и оценивается как true (в Nunjucks это, например, непустая строка, число не равное 0, или логическое true), то будет отображено «<samp>Это верно</samp>». Иначе ничего не будет отображено.</p><p>Также есть возможность указать альтернативные условия с помощью конструкций <code>elif</code> и <code>else</code>:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">if</span> <span class="token object">page</span> <span class="token operator">==</span> <span class="token string">'home'</span> <span class="token punctuation delimiter">%}</span></span>
    Контент для главной страницы
<span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> elif <span class="token object">page</span> <span class="token operator">==</span> <span class="token string">'contact'</span> <span class="token punctuation delimiter">%}</span></span>
    Контент для страницы контактов
<span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">else</span> <span class="token punctuation delimiter">%}</span></span>
    Контент для остальных страниц
<span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">endif</span> <span class="token punctuation delimiter">%}</span></span>
</code></pre><p>Предполагается, что <code>page</code> — это переменная, доступная в Nunjucks шаблоне, которая содержит строку с названием страницы (например, <code>home</code>, <code>contact</code>).</p><p>Если значение переменной <code>page</code> равно <code>home</code>, то будет показан контент для главной страницы. Если значение равно <code>contact</code>, будет показан контент для страницы контактов. Во всех остальных случаях будет показан общий контент.</p><ul><li><code>{% if page == 'home' %}</code> проверяет первое условие.</li><li><code>{% elif page == 'contact' %}</code> проверяет второе условие, если первое не выполнилось.</li><li><code>{% else %}</code> выполняется, если ни одно из предыдущих условий не оказалось истинным.</li><li><code>{% endif %}</code> завершает условное выражение.</li></ul><p>Оператор <code>==</code> (равно) сравнивает два значения на равенство.</p><p>Оператор <code>!=</code> (не равно) сравнивает два значения на неравенство.</p><p>Операторы сравнения: <code>></code> (больше), <code>&lt;</code> (меньше), <code>>=</code> (больше или равно), <code>&lt;=</code> (меньше или равно).</p><p>Можно указать несколько условий с помощью <code>and</code> и <code>or</code>:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">if</span> happy <span class="token operator">and</span> hungry <span class="token punctuation delimiter">%}</span></span>
    Я счастлив и голоден; оба условия верны
<span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">endif</span> <span class="token punctuation delimiter">%}</span></span>
<span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">if</span> happy <span class="token operator">or</span> hungry <span class="token punctuation delimiter">%}</span></span>
    Я счастлив или голоден; верно хотя бы одно из условий
<span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">endif</span> <span class="token punctuation delimiter">%}</span></span>
</code></pre><p>Оператор <code>and</code>: оба условия должны быть истинными, чтобы результат был истинным. Например: <code>{% if 1 == 1 and 2 == 2 %}</code> (истинно, так как оба условия истинны).</p><p>Оператор <code>or</code>: хотя бы одно из условий должно быть истинным, чтобы результат был истинным. Например: <code>{% if 1 == 1 or 2 == 3 %}</code> (истинно, так как первое условие истинно).</p><p>Операторы <code>and</code> и <code>or</code> работают в соответствии с законами логики. Порядок вычисления условий определяется приоритетом операторов (<code>and</code> имеет более высокий приоритет, чем <code>or</code>), но его можно изменить с помощью скобок.</p></section><hr><section><h2><span id="header-5">Циклы</span></h2><p>✒️ <dfn>Циклы</dfn> в Nunjucks — это механизм для повторяющегося выполнения блока кода над коллекцией данных (массивами, объектами или другими перебираемыми структурами). Они позволяют автоматически генерировать повторяющиеся части шаблона.</p><p>В Nunjucks для организации циклов используется конструкция <code>for...in</code> (или просто <code>for</code>), которая, как и в JavaScript, предназначена для перебора элементов массива или свойств объекта. При работе с массивами цикл перебирает элементы, которые затем можно использовать для доступа к их свойствам:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> set brands <span class="token operator">=</span> <span class="token punctuation">[</span>
{ brand<span class="token operator">:</span> <span class="token string">'Lada'</span><span class="token punctuation">,</span> <span class="token object">country</span><span class="token operator">:</span> <span class="token string">'USSR'</span> }<span class="token punctuation">,</span>
{ brand<span class="token operator">:</span> <span class="token string">'BMW'</span><span class="token punctuation">,</span> <span class="token object">country</span><span class="token operator">:</span> <span class="token string">'Germany'</span> }
<span class="token punctuation">]</span> <span class="token punctuation delimiter">%}</span></span>

<span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">for</span> item <span class="token keyword">in</span> brands <span class="token punctuation delimiter">%}</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Модель: <span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> item<span class="token punctuation">.</span>brand <span class="token punctuation delimiter">}}</span></span>; Страна: <span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> item<span class="token punctuation">.</span><span class="token object">country</span> <span class="token punctuation delimiter">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">endfor</span> <span class="token punctuation delimiter">%}</span></span>
</code></pre><p>Вывод кода будет:</p><pre class="language-html" tabindex="0"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Модель: Lada; Страна: USSR<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Модель: BMW; Страна: Germany<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre><p>В этом примере перечислены все элементы, используя атрибуты <code>brand</code> и <code>country</code> каждого элемента в массиве <code>brands</code>. Оператор <code>for</code> проходит по списку и выполняет действие для каждого элемента.</p><p>Также можно итерироваться по диапазону чисел:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token keyword">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation delimiter">%}</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Номер: <span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> i <span class="token punctuation delimiter">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">endfor</span> <span class="token punctuation delimiter">%}</span></span>
</code></pre><p>Для данного примера Nunjucks выведет следующий HTML:</p><pre class="language-html" tabindex="0"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Номер: 0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Номер: 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Номер: 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Номер: 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Номер: 4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre><p>Внутри цикла доступны специальные переменные:</p><ul><li><code>loop.index</code>: Текущий индекс цикла (начинается с 1).</li><li><code>loop.first: true</code>, если это первая итерация цикла.</li><li><code>loop.last: true</code>, если это последняя итерация цикла.</li></ul></section><hr><section><h2><span id="header-6">Наследование шаблонов</span></h2><p>Наследование шаблонов помогает создавать согласованную структуру веб-сайта, позволяя повторно использовать базовый шаблон и настраивать определённые части для разных страниц. Например, заголовок и футер страницы обычно имеют одинаковое содержимое на всех страницах. Поэтому нет смысла дублировать их везде, вместо этого можно определить их в одном файле и использовать его на всех страницах.</p><p><code>extends</code> используется для указания наследования шаблона. Указанный шаблон используется как базовый:</p><pre class="language-nunjucks" tabindex="0"><code class="language-nunjucks"><span class="token punctuation delimiter">{%</span> <span class="token tag keyword">extends</span> <span class="token string">'base.html'</span> <span class="token operator">%</span><span class="token punctuation">}</span>
</code></pre><p>С помощью <code>include</code> можно вставлять повторно используемые компоненты или частичные шаблоны в основные шаблоны:</p><pre class="language-nunjucks" tabindex="0"><code class="language-nunjucks"><span class="token punctuation delimiter">{%</span> <span class="token tag keyword">include</span> <span class="token string">'header.html'</span> <span class="token operator">%</span><span class="token punctuation">}</span>
</code></pre><p>Эта функция помогает поддерживать согласованную структуру на сайте и избегать повторения кода. Важно отметить, что <code>include</code> просто вставляет содержимое одного файла в другой, без какой-либо логики наследования или переопределения блоков.</p><p>Использование <code>include</code> и наследование шаблонов соответствуют принципу DRY (Don't Repeat Yourself — не повторяйся). Идея состоит в том, что если нужно написать код более одного раза в нескольких местах, то его следует поместить в функцию.</p><p><code>block</code> определяет раздел в шаблоне и идентифицирует его с помощью имени. Это используется при наследовании шаблонов. Базовые шаблоны могут указывать блоки, а дочерние шаблоны могут переопределять их новым содержимым:</p><figure><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token object">block</span> title <span class="token punctuation delimiter">%}</span></span>Мой сайт<span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> endblock <span class="token punctuation delimiter">%}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token object">block</span> css <span class="token punctuation delimiter">%}</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>main.css<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> endblock <span class="token punctuation delimiter">%}</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token object">block</span> content <span class="token punctuation delimiter">%}</span></span><span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> endblock <span class="token punctuation delimiter">%}</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
</code></pre><figcaption>Файл <span class="blue">base.html</span></figcaption></figure><figure><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> extends <span class="token string">'base.html'</span> <span class="token punctuation delimiter">%}</span></span>

<span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token object">block</span> title <span class="token punctuation delimiter">%}</span></span>Главная страница<span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> endblock <span class="token punctuation delimiter">%}</span></span>

<span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token object">block</span> content <span class="token punctuation delimiter">%}</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Добро пожаловать!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Это главная страница сайта.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> endblock <span class="token punctuation delimiter">%}</span></span>
</code></pre><figcaption>Файл <span class="blue">index.html</span> (дочерний шаблон)</figcaption></figure><p>В этом примере <span class="blue">index.html</span> наследует от <span class="blue">base.html</span> и переопределяет блоки <code>title</code> и <code>content</code>. Блок <code>css</code> наследуется из <span class="blue">base.html</span>.</p></section><hr><section><h2><span id="header-7">Фильтры</span></h2><p>✒️ <dfn>Фильтры</dfn> в Nunjucks — это функции, которые применяются к переменным для преобразования или форматирования их значений перед отображением. Фильтры указываются после символа вертикальной черты (<code>|</code>) и позволяют модифицировать данные перед выводом в шаблоне.</p><p>Например, с помощью фильтра <code>upper</code> можно перевести текст в верхний регистр перед его выводом на страницу:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> <span class="token string">'Conspect'</span> <span class="token operator">|</span> <span class="token filter function">upper</span> <span class="token punctuation delimiter">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>  <span class="token comment">&lt;!-- код в шаблоне Nunjucks --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>CONSPECT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>  <span class="token comment">&lt;!-- результирующий HTML --></span>
</code></pre><p>Фильтры можно встраивать в цепочки для последовательной обработки данных:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> <span class="token string">"mOdEl"</span> <span class="token operator">|</span> <span class="token filter function">replace</span> <span class="token punctuation">(</span><span class="token string">'mOdEl'</span><span class="token punctuation">,</span> <span class="token string">'BrAnD'</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token filter function">capitalize</span> <span class="token punctuation delimiter">}}</span></span>
</code></pre><p>Этот код выведет «<samp>Brand</samp>», сначала заменив <code>mOdEl</code> на <code>BrAnD</code>, а затем сделав первую букву заглавной.</p><p>Если в среде включено автоматическое экранирование, то весь вывод будет автоматически экранироваться для безопасного отображения. Чтобы вручную пометить вывод как безопасный, можно использовать фильтр <code>safe</code>. Nunjucks не будет экранировать этот вывод:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> brand <span class="token punctuation delimiter">}}</span></span>  <span class="token comment">&lt;!-- Вывод: &ampamp;lt;span&ampamp;gt; --></span>
<span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> brand <span class="token operator">|</span> <span class="token filter function">safe</span> <span class="token punctuation delimiter">}}</span></span>  <span class="token comment">&lt;!-- Вывод: &lt;span> --></span>
</code></pre><p>Если автоэкранирование отключено, то весь вывод будет отображаться как есть.</p><p>Фильтр <code>safe</code> следует использовать с осторожностью, поскольку он отключает экранирование и может привести к XSS-уязвимостям, если значение переменной получено из ненадёжного источника (например, от пользователя).</p><p>Можно вручную экранировать переменные с помощью фильтра <code>escape</code>. Фильтр преобразует символы <code>&</code>, <code>&lt;</code>, <code>></code> и <code>"</code> в HTML-безопасные последовательности. Это полезно, если нужно отобразить текст, который может содержать HTML-символы, а также для предотвращения HTML-инъекций. Возвращаемое значение интерпретируется как строка разметки:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> brand <span class="token punctuation delimiter">}}</span></span>  <span class="token comment">&lt;!-- Вывод: &lt;span> --></span>
<span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> brand <span class="token operator">|</span> <span class="token filter function">escape</span> <span class="token punctuation delimiter">}}</span></span>  <span class="token comment">&lt;!-- Вывод: &ampamp;lt;span&ampamp;gt; --></span>
</code></pre><p>✒️ <dfn>HTML-инъекция</dfn> — это тип уязвимости веб-приложений, который позволяет злоумышленнику внедрить произвольный HTML-код в веб-страницу, отображаемую другим пользователям. Это происходит, когда веб-приложение принимает данные от пользователя (например, через форму, URL-параметр или cookie) и включает эти данные в HTML-код страницы без должной проверки и экранирования.</p><p>Фильтр <code>abs</code> возвращает абсолютное значение аргумента:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> <span class="token operator">-</span><span class="token number">3</span> <span class="token operator">|</span> <span class="token filter function">abs</span> <span class="token punctuation delimiter">}}</span></span>
</code></pre><p>Вывод кода будет: «<samp>3</samp>».</p><p>Фильтр <code>capitalize</code> делает первую букву заглавной, а остальные строчными:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> CoLLEctions <span class="token operator">|</span> <span class="token filter function">capitalize</span> <span class="token punctuation delimiter">}}</span></span>
</code></pre><p>Вывод кода будет: «<samp>Collections</samp>».</p><p>Фильтр <code>lower</code> преобразует строку в нижний регистр:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> COLLECTIONS <span class="token operator">|</span> <span class="token filter function">lower</span> <span class="token punctuation delimiter">}}</span></span>
</code></pre><p>Вывод кода будет: «<samp>collections</samp>».</p><p>Фильтр <code>random</code> выбирает случайное значение из массива (оно будет меняться при каждом обновлении страницы):</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token filter function">random</span> <span class="token punctuation delimiter">}}</span></span>
</code></pre><p>Вывод кода будет: случайное значение от 1 до 6 включительно.</p><p>Фильтр <code>reverse</code> переворачивает строку или массив:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> abcdef <span class="token operator">|</span> <span class="token filter function">reverse</span> <span class="token punctuation delimiter">}}</span></span>
</code></pre><p>Вывод кода будет: «<samp>fedcba</samp>». А чтобы перевернуть массив:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token filter function">reverse</span> <span class="token punctuation delimiter">%}</span></span>
    <span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> i <span class="token punctuation delimiter">}}</span></span>
<span class="token language-liquid liquid"><span class="token punctuation delimiter">{%</span> <span class="token keyword">endfor</span> <span class="token punctuation delimiter">%}</span></span>
</code></pre><p>В этом примере цикл <code>for</code> будет итерироваться в обратном порядке: «<samp>4, 3, 2, 1</samp>».</p><p>Фильтр <code>title</code> делает первую букву каждого слова заглавной:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> collections car germany <span class="token operator">|</span> <span class="token filter function">title</span> <span class="token punctuation delimiter">}}</span></span>
</code></pre><p>Вывод кода будет: «<samp>Collections Car Germany</samp>».</p><p>Фильтр <code>upper</code> преобразует строку в верхний регистр:</p><pre class="language-liquid" tabindex="0"><code class="language-liquid"><span class="token language-liquid liquid"><span class="token punctuation delimiter">{{</span> ussr <span class="token operator">|</span> <span class="token filter function">upper</span> <span class="token punctuation delimiter">}}</span></span>
</code></pre><p>Вывод кода будет: «<samp>USSR</samp>».</p><p><a href="#top" aria-label="Перейти в начало страницы" class="top" role="button">Наверх</a></p><footer><section aria-labelledby="sources-title"><h2 class="message" id="sources-title">Источники:</h2><ul class="source-list"><li><a href="https://mozilla.github.io/nunjucks/templating.html" target="_blank" rel="noopener noreferrer"><img alt="сайт Nunjucks" height="40" src="assets/img/nunjucks/nunjucks.svg" width="40"> <cite>Nunjucks Docs</cite></a></li></ul></section></footer></section></main><footer role="contentinfo"><section aria-labelledby="contact-heading"><h2 class="heading" id="contact-heading">Связь со мной:</h2>Если вы заметили неточность, устаревшие данные или у вас есть замечания по коду и оформлению, вы можете связаться со мной:<ul class="list-footer"><li><address><a href="mailto:frazrabotka@gmail.com" aria-label="Написать электронное сообщение" title="Отправь мне e-mail"><img alt="Email для связи" height="44" src="assets/img/main/email.svg" width="44" loading="lazy"></a></address></li><li><address><a href="https://github.com/frontrabotka" aria-label="Ссылка на профиль GitHub: frontrabotka" title="Мой GitHub" rel="noopener noreferrer" target="_blank"><img alt="Профиль GitHub: frontrabotka" height="50" src="assets/img/main/github.svg" width="50" loading="lazy"></a></address></li><li><a href="https://boosty.to/frontrabotka/donate" aria-label="Поддержи донатом" title="Донат на мотивацию" rel="noopener noreferrer" target="_blank" loading="lazy"><img alt="Поддержка проекта" height="44" src="assets/img/main/ruble.svg" width="44" loading="lazy"></a></li><li><a href="https://www.donationalerts.com/r/frontrabotka" aria-label="Support with a donation" title="For a cup of coffee" rel="noopener noreferrer" target="_blank"><img alt="Поддержка проекта" height="44" src="assets/img/main/dollar.svg" width="44" loading="lazy"></a></li></ul><small class="centered">© 2025</small></section></footer></body></html>